name: karan-github-actions
on:
  pull_request:
    types: opened
    branches: main
  workflow_dispatch:
env:
  LOG_LEVEL: debug
  APPLICATION_ENV: prod
jobs:
  first-job:
    environment: development
    runs-on: ubuntu-latest
    env:
      DB_PORT: 8080
      DB_USERNAME: ${{ secrets.DB_USERNAME }}
      DB_PASSWORD: ${{ secrets.DB_PASSWORD }}
      DB_NAME: ${{ vars.DB_NAME }}
    steps:
    - name: just checking
      run: pwd
    - name: creating file
      run: echo "123" > abc.txt
    - name: Reading file
      run: cat ./abc.txt
    - name: pulling code
      uses: actions/checkout@v3
    - name: running Script
      run: sh ./testing.sh
    - name: printing the env variables
      if: ${{ env.LOG_LEVEL == 'debug' }}
      run: echo "${{ env.APPLICATION_ENV }}"
    - name: printing job specific env variable
      run: echo "${{ env.DB_PORT }}"
    - name: printing the environment related username
      run: echo "${{ env.DB_USERNAME }}"
    - name: printing the environment related password
      run: echo "${{ env.DB_PASSWORD }}"
    - name: printing the environment related variable
      run: echo "${{ env.DB_NAME }}"
  second-job:
    runs-on: ubuntu-latest
    needs: first-job
    steps:
    - name: printing the env variable in this step
      env:
        DB_PASSWORD: 123
      run: echo "${{ env.DB_PASSWORD }}"
